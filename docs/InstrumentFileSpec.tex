\documentclass[12pt]{article}
\usepackage[a4paper,margin=2.7cm]{geometry}
\usepackage{syntax}
\usepackage{enumerate}
\usepackage{float}
\floatstyle{boxed}
\restylefloat{figure}

\begin{document}

This section defines the data files which specify what instruments are available. The precise definition of the file syntax is provided in 
Backaus-Naur form below. 
It must 
\begin{enumerate} [a)]
\item{begin with a ``type'' field consisting of \texttt{type=} followed by a description of a type which the system knows. This can be
a constant, shorthand for one of the default generic types (at the moment: \texttt{MIDI}) or a file name (ending in \texttt{.ck}). In the case of a file name
the system will check the first line for \texttt{// type=}. It will then attempt to match the remainder of the line to a constant defined in the \texttt{Server.ck}
file, at which point it should add the file to the virtual machine and instantiate an object. Note that this code will have to be added to \texttt{Server.ck}
when a new instrument is added by a \texttt{.ck}.}
\item{follow this with a name, specified by \texttt{name=}\textit{name}}
\item{a MIDI file will now look for a port, specified as \texttt{port=}\textit{number or name}} (if the name of the port is specified, it can be in quotes,
 but it is not required)
\item{follow this with 0 or more translation lines.}

\end{enumerate}

A file with 0 translation lines would cause the server to instantiate the object specified, and may therefore be of some use.

\subsection{Grammar}
\setlength{\grammarindent}{12em}
\begin{grammar}
	<file> ::= <type> <linebreak> <name> <linebreak> ( <file-element> <linebreak> ) * 
	
	<type> ::= ``type=''<type-string> <linebreak>
	
	<type-string> ::= ``MIDI''
	
	<name> ::= ``name=''<name-string> <linebreak>
	
	<name-string> ::= `[a-zA-Z][a-zA-Z0-9_]*'
	
	<file-element> ::= <midi-port> \alt <translation>
	
	<midi-port> ::= `port=' <midi-port-desc>
	
	<midi-port-desc> ::= `[a-zA-Z][a-zA-Z0-9]*' \alt `[0-9]+'
	
	<translation> ::= <osc-message-desc> `=' <output-message-desc> <linebreak>
	
	<osc-message-desc> ::= `"'<osc-addr-pat>  <osc-typetag> `"'
	
	<osc-addr-pat> ::= (`/' <osc-string> )+
	
	<osc-typetag> ::= `, ' <osc-type>+
	
	<osc-type> ::= `i' \alt `f' \alt `s' \alt `b'
	
	<osc-string> ::= `[^\\0]+'
	
	<output-message-desc> ::= <midi-message> \alt future message types
	
	<midi-message> ::= <midi-stat-byte> `,' <midi-data-byte> `,' <midi-data-byte>
	
	<midi-stat-byte> ::= 128--255
	
	<midi-data-byte> ::= 0--127 \alt <osc-arg>
	
	<osc-arg> ::= `$'[0-9]+

\end{grammar}
\end{document}
